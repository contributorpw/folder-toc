<!DOCTYPE html>

<html>
<head>
  <title><%= title %></title>

  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  
  <link rel="stylesheet" media="all" href="<%= name %>_assets/css/normalize.css" />
  <link rel="stylesheet" media="all" href="<%= name %>_assets/css/styles.css" />

  
</head>
<body>

  <div class="file-index">

    <h1><%= title %></h1>

    <form class="search-form">
      <input name="file-filter"/>
    </form>

    <% for (var i=0, l=files.length; i<l; i++) { %>
      <% var file = files[i]; %>
      <a class="file" href="<%= file.path %>" target="file-content">
        <span class="file-name"><%= file.name %></span>
        <span class="file-path"><%= file.path %></span>
      </a>
    <% } %>
  </div>

  <iframe src="<%= files[0].path  %>" name="file-content" class="file-content"></iframe>

  <script type="text/javascript" src="<%= name %>_assets/js/jquery.min.js"></script>
  <script type="text/javascript">

    (function(){

      var $searchInput = $('input[name="file-filter"]'),
        $files = $('.file');

      function filter(txt){
        $files.each(function(){
          var $this = $(this);
          if (!filter || $this.find('.file-path').html().indexOf(txt) >= 0){
            $this.show();
          } else {
            $this.hide();
          }
        });
      }

      $searchInput.on('keyup', function(){
        filter($searchInput.val());
      });


      $searchInput.val('');

    })();

  </script>
</body>
</html>
